(function(e){function t(t){for(var r,a,s=t[0],i=t[1],u=t[2],l=0,d=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);b&&b(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},c={app:0},o=[];function a(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"e34ee262"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=c[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=c[e]=[t,r]}));t.push(n[2]=r);var o,i=document.createElement("script");i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=a(e);var u=new Error;o=function(t){i.onerror=i.onload=null,clearTimeout(l);var n=c[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",u.name="ChunkLoadError",u.type=r,u.request=o,n[1](u)}c[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:i})}),12e4);i.onerror=i.onload=o,document.head.appendChild(i)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/static/",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var b=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0c60":function(e,t,n){"use strict";n("44d3")},2561:function(e,t,n){},"44d3":function(e,t,n){},"45d1":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),c={class:"container col-6 mt-5 pt-5 bg-light",style:{"border-radius":"8px","min-width":"400px"}},o=Object(r["i"])("h5",{class:"text-center"},"Please login",-1),a={class:"container col-8 text-left mt-5"},s={class:"mb-3"},i=Object(r["i"])("label",{for:"loginInput",class:"form-label"},"Login",-1),u={class:"mb-3"},l=Object(r["i"])("label",{for:"passwordInput",class:"form-label"},"Password",-1),b={class:"mb-3"};function d(e,t,n,d,f,p){return Object(r["t"])(),Object(r["h"])("div",c,[o,Object(r["i"])("div",a,[Object(r["i"])("div",s,[i,Object(r["J"])(Object(r["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return f.username=e}),type:"email",class:"form-control",id:"loginInput"},null,512),[[r["G"],f.username]])]),Object(r["i"])("div",u,[l,Object(r["J"])(Object(r["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return f.password=e}),class:"form-control",type:"password",id:"passwordInput",rows:"3"},null,512),[[r["G"],f.password]])]),Object(r["i"])("div",b,[Object(r["i"])("button",{onClick:t[2]||(t[2]=function(){return p.login&&p.login.apply(p,arguments)}),class:"btn btn-success loginBtn mb-5"}," Send ")])])])}var f=n("5530"),p=n("5502"),O={name:"login",methods:Object(f["a"])(Object(f["a"])(Object(f["a"])({},Object(p["b"])(["FETCH_LOGIN"])),Object(p["d"])(["UPDATE_USERS","UPDATE_IS_FETCHING"])),{},{login:function(){var e=this.username,t=this.password;this.username&&this.password?this.FETCH_LOGIN({username:e,password:t}):console.log("Input username && pasword")}}),data:function(){return{username:"",password:""}}},m=n("d959"),j=n.n(m);const v=j()(O,[["render",d]]);t["default"]=v},4611:function(e,t,n){"use strict";n("7cdd")},"504b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c={key:0,class:"content container"},o={key:1,class:"content"};function a(e,t,n,a,s,i){var u=Object(r["B"])("v-b-header"),l=Object(r["B"])("router-view"),b=Object(r["B"])("v-loader"),d=Object(r["B"])("notifications");return Object(r["t"])(),Object(r["h"])("main",null,[Object(r["k"])(u),e.GET_IS_FETCHING?(Object(r["t"])(),Object(r["h"])("div",o,[Object(r["k"])(b)])):(Object(r["t"])(),Object(r["h"])("div",c,[Object(r["k"])(l,null,{default:Object(r["I"])((function(e){var t=e.Component,n=e.route;return[Object(r["k"])(r["b"],{name:"route-fade",mode:"out-in",appear:""},{default:Object(r["I"])((function(){return[(Object(r["t"])(),Object(r["f"])(Object(r["C"])(t),{key:n.path}))]})),_:2},1024)]})),_:1})])),Object(r["k"])(d,{position:"bottom left"})])}var s=n("1da1"),i=n("5530"),u=(n("96cf"),n("5502")),l=function(e){return Object(r["w"])("data-v-8add0f8a"),e=e(),Object(r["u"])(),e},b={class:"navbar navbar-expand-lg navbar-light bg-light"},d={class:"container col-9 px-0"},f=Object(r["j"])("Home"),p=l((function(){return Object(r["i"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(r["i"])("span",{class:"navbar-toggler-icon"})],-1)})),O={class:"collapse navbar-collapse",id:"navbarSupportedContent"},m={key:0,class:"navbar-nav me-auto mb-2 mb-lg-0 w-100 d-flex justify-content-end"},j=Object(r["j"])("Login"),v=Object(r["j"])("Registration"),h={key:1,class:"navbar-nav me-auto mb-2 mb-lg-0 w-100 d-flex justify-content-end"},g=Object(r["j"])("Logout");function E(e,t,n,c,o,a){var s=Object(r["B"])("router-link");return Object(r["t"])(),Object(r["h"])("nav",b,[Object(r["i"])("div",d,[Object(r["k"])(s,{class:"navbar-brand ms-auto",to:"/"},{default:Object(r["I"])((function(){return[f]})),_:1}),p,Object(r["i"])("div",O,[e.GET_IS_LOGGED_IN[0]||e.GET_IS_LOGGED_IN[1]?(Object(r["t"])(),Object(r["h"])("ul",h,[Object(r["i"])("li",{onClick:t[2]||(t[2]=function(){return a.logout&&a.logout.apply(a,arguments)}),class:"nav-item"},[Object(r["k"])(s,{class:"nav-link fs-6","aria-current":"page",to:"/login"},{default:Object(r["I"])((function(){return[g]})),_:1})])])):(Object(r["t"])(),Object(r["h"])("ul",m,[Object(r["i"])("li",{onClick:t[0]||(t[0]=function(){return e.closeMobMenu&&e.closeMobMenu.apply(e,arguments)}),class:"nav-item"},[Object(r["k"])(s,{class:"nav-link fs-6","aria-current":"page",to:"/login"},{default:Object(r["I"])((function(){return[j]})),_:1})]),Object(r["i"])("li",{onClick:t[1]||(t[1]=function(){return e.closeMobMenu&&e.closeMobMenu.apply(e,arguments)}),class:"nav-item"},[Object(r["k"])(s,{class:"nav-link fs-6 pe-0","aria-current":"page",to:"/registration"},{default:Object(r["I"])((function(){return[v]})),_:1})])]))])])])}n("7b17");var _={name:"v-b-header",computed:Object(u["c"])(["GET_IS_LOGGED_IN"]),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(u["b"])(["FETCH_CART","FETCH_USERS"])),Object(u["d"])(["LOGOUT"])),{},{logout:function(){this.LOGOUT()}}),mounted:function(){console.log(this.GET_IS_LOGGED_IN)}},S=(n("f429"),n("d959")),T=n.n(S);const I=T()(_,[["render",E],["__scopeId","data-v-8add0f8a"]]);var y=I,w=function(e){return Object(r["w"])("data-v-1f6daf1a"),e=e(),Object(r["u"])(),e},k=w((function(){return Object(r["i"])("div",{class:"overlay"},[Object(r["i"])("div",{class:"body"},[Object(r["i"])("button",{class:"btn",type:"button",disabled:""},[Object(r["i"])("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(r["j"])(" Loading... ")])])],-1)}));function C(e,t,n,c,o,a){return Object(r["t"])(),Object(r["f"])(r["b"],null,{default:Object(r["I"])((function(){return[k]})),_:1})}var G=function(){var e=document.querySelector("body");e.style.overflowY="hidden"},U=function(){var e=document.querySelector("body");e.style.overflowY="auto"},R={name:"v-loader",mounted:function(){G()},beforeUnmount:function(){U()}};n("0c60");const x=T()(R,[["render",C],["__scopeId","data-v-1f6daf1a"]]);var D=x,A={slot:"body","slot-scope":"props"},H={class:"custom-template"},L=Object(r["i"])("div",{class:"custom-template-icon"},[Object(r["i"])("i",{class:"icon ion-android-checkmark-circle"})],-1),N={class:"custom-template-content"},P={class:"custom-template-title"},F=["innerHTML"],V=Object(r["i"])("i",{class:"icon ion-android-close"},null,-1),B=[V];function M(e,t,n,c,o,a){var s=Object(r["B"])("notifications");return Object(r["t"])(),Object(r["f"])(s,{group:"custom-template",duration:15e3,width:500,"animation-name":"v-fade-left",position:"top left"},{default:Object(r["I"])((function(){return[Object(r["i"])("template",A,[Object(r["i"])("div",H,[L,Object(r["i"])("div",N,[Object(r["i"])("div",P,[Object(r["j"])(Object(r["E"])(e.props.item.title)+" Random number: "+Object(r["E"])(e.props.item.randomNumber)+" ",1),Object(r["i"])("div",null," Random number: "+Object(r["E"])(e.props.item.randomNumber),1)]),Object(r["i"])("div",{class:"custom-template-text",innerHTML:e.props.item.text},null,8,F)]),Object(r["i"])("div",{class:"custom-template-close",onClick:t[0]||(t[0]=function(){var t;return e.props.close&&(t=e.props).close.apply(t,arguments)})},B)])])]})),_:1})}n("99af");var J={name:"v-notification",data:function(){return{}},methods:{show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom",n=(this.callit,'\n        Heelo! Start notificate brothers about errors!\n        <br>\n        <button class="fuck_btn" onclick=""> click me!</button>\n        Date: '.concat(new Date,"\n      "));this.$notify({group:e,clean:!1,type:t,title:"Test ".concat(t," notification #").concat(this.id++),text:n,randomNumber:"100010010",data:{randomNumber:100010010}})},clean:function(e){this.$notify({group:e,clean:!0})}}};const K=T()(J,[["render",M]]);var Y=K,q={name:"App",components:{VNotification:Y,VLoader:D,VBHeader:y},computed:Object(u["c"])(["GET_IS_FETCHING","GET_USERS"]),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["FETCH_USERS"])),Object(u["d"])(["UPDATE_USERS","UPDATE_IS_FETCHING"])),data:function(){},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.UPDATE_IS_FETCHING(!0),t.next=3,e.FETCH_USERS();case 3:e.UPDATE_IS_FETCHING(!1);case 4:case"end":return t.stop()}}),t)})))()}};n("5ca9");const z=T()(q,[["render",a]]);var Q=z,W=(n("ddb8"),n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),Z={class:"container col-10"},$={key:0,class:"row"},X={class:"col col-4 mt-5"},ee={class:"col col-8 mt-5"},te={key:1,class:"row"};function ne(e,t,n,c,o,a){var s=Object(r["B"])("v-search-box"),i=Object(r["B"])("v-users"),u=Object(r["B"])("v-general-page"),l=Object(r["B"])("login");return Object(r["t"])(),Object(r["h"])("div",Z,[e.GET_IS_LOGGED_IN[0]||e.GET_IS_LOGGED_IN[1]?(Object(r["t"])(),Object(r["h"])("div",$,[Object(r["i"])("div",X,[Object(r["k"])(s),Object(r["k"])(i)]),Object(r["i"])("div",ee,[Object(r["k"])(u)])])):(Object(r["t"])(),Object(r["h"])("div",te,[Object(r["k"])(l)]))])}n("ac1f"),n("841c");var re={class:"input-group"},ce={class:"form-outline w-100"};function oe(e,t,n,c,o,a){return Object(r["t"])(),Object(r["h"])("div",re,[Object(r["i"])("div",ce,[Object(r["J"])(Object(r["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.inputValue=e}),onInput:t[1]||(t[1]=function(){return a.search&&a.search.apply(a,arguments)}),placeholder:"Search",type:"search",id:"form1",class:"form-control"},null,544),[[r["G"],o.inputValue]])])])}var ae={methods:Object(i["a"])(Object(i["a"])({},Object(u["d"])(["UPDATE_SEARCHED_USERS"])),{},{search:function(e){this.UPDATE_SEARCHED_USERS(this.inputValue)}}),data:function(){return{inputValue:""}}};n("4611");const se=T()(ae,[["render",oe],["__scopeId","data-v-0c7ae633"]]);var ie=se,ue={class:"mt-3 col users_box"},le={class:"box"},be=["onClick"],de={class:"user_name"};function fe(e,t,n,c,o,a){return Object(r["t"])(),Object(r["h"])("div",ue,[Object(r["i"])("div",le,[(Object(r["t"])(!0),Object(r["h"])(r["a"],null,Object(r["z"])(e.GET_SEARCHED_USERS,(function(e){return Object(r["t"])(),Object(r["h"])("div",{onClick:function(t){return a.pickUser(e,t)},class:"user",key:e.id},[Object(r["i"])("span",de,Object(r["E"])(e.username),1)],8,be)})),128))])])}n("159b"),n("4fad");var pe={name:"VUsers",computed:Object(u["c"])(["GET_IS_FETCHING","GET_SEARCHED_USERS"]),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(u["b"])(["FETCH_USERS"])),Object(u["d"])(["UPDATE_USERS","UPDATE_IS_FETCHING","SET_RECEIVER_ID"])),{},{pickUser:function(e,t){if(t.target.classList.contains("active")||t.target.parentNode.classList.contains("active"))return t.target.classList.remove("active"),void t.target.parentNode.classList.remove("active");var n=document.querySelector(".box");Object.entries(n.children).forEach((function(e){return e[1].classList.remove("active")})),t.target.classList.contains("user")?t.target.classList.add("active"):t.target.parentNode.classList.add("active"),this.SET_RECEIVER_ID(e._id)}})};n("fda0");const Oe=T()(pe,[["render",fe]]);var me=Oe,je=function(e){return Object(r["w"])("data-v-52f9e240"),e=e(),Object(r["u"])(),e},ve={class:"row"},he={class:"col"},ge={class:"container mt-5"},Ee=je((function(){return Object(r["i"])("p",{class:"h5"},"Send push-notifications:",-1)})),_e={class:"mb-3"},Se=je((function(){return Object(r["i"])("label",{for:"msg_title",class:"form-label"},"Title:",-1)})),Te={class:"mb-3"},Ie=je((function(){return Object(r["i"])("label",{for:"msg_body",class:"form-label"},"Message body:",-1)}));function ye(e,t,n,c,o,a){return Object(r["t"])(),Object(r["h"])("div",ve,[Object(r["i"])("div",he,[Object(r["i"])("button",{onClick:t[0]||(t[0]=function(){return a.subscribeFunc&&a.subscribeFunc.apply(a,arguments)}),class:"btn btn-primary sbscb"}," Subscribe! ")]),Object(r["i"])("div",ge,[Ee,Object(r["i"])("div",_e,[Se,Object(r["J"])(Object(r["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.title=e}),type:"text",class:"form-control bg-light",id:"msg_title"},null,512),[[r["G"],o.title]])]),Object(r["i"])("div",Te,[Ie,Object(r["J"])(Object(r["i"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.body=e}),class:"form-control bg-light",type:"text",id:"msg_body"},null,512),[[r["G"],o.body]])]),Object(r["i"])("button",{class:"btn btn-success btn-large mt-3 sendbtn",id:"send",onClick:t[3]||(t[3]=function(){return a.sendMessage&&a.sendMessage.apply(a,arguments)})}," Send! ")])])}n("38cf"),n("5319"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7");var we={computed:Object(u["c"])(["GET_VAPID_KEY"]),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(u["b"])(["SEND_MESSAGE","FETCH_SUBSCRIBE"])),Object(u["d"])(["UPDATE_USERS","UPDATE_IS_FETCHING","SET_RECEIVER_ID"])),{},{sendMessage:function(){var e=this,t=function(){e.title="",e.body=""},n=this.title,r=this.body;this.SEND_MESSAGE({title:n,body:r,callback:t})},urlBase64ToUint8Array:function(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(n),c=new Uint8Array(r.length),o=0;o<r.length;++o)c[o]=r.charCodeAt(o);return c},subscribeFunc:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.FETCH_SUBSCRIBE();case 1:case"end":return t.stop()}}),t)})))()}}),data:function(){return{title:"",body:""}},mounted:function(){this.urlBase64ToUint8Array("kjsdhfkjshk")}};n("eb39");const ke=T()(we,[["render",ye],["__scopeId","data-v-52f9e240"]]);var Ce=ke,Ge=n("45d1"),Ue={name:"Home",components:{VSearchBox:ie,VUsers:me,VGeneralPage:Ce,Login:Ge["default"]},computed:Object(u["c"])(["GET_IS_LOGGED_IN"]),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["FETCH_CART","FETCH_USERS"])),Object(u["d"])(["UPDATE_IS_FETCHING"])),updated:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.UPDATE_IS_FETCHING(!0),t.next=3,e.FETCH_USERS();case 3:e.UPDATE_IS_FETCHING(!1),console.log(e.GET_IS_LOGGED_IN);case 5:case"end":return t.stop()}}),t)})))()}};n("d689");const Re=T()(Ue,[["render",ne],["__scopeId","data-v-7152c068"]]);var xe=Re,De=[{path:"/",name:"main",component:xe},{path:"/login",name:"login",component:function(){return n.e("about").then(n.bind(null,"45d1"))}},{path:"/registration",name:"registration",component:function(){return n.e("about").then(n.bind(null,"1cd4"))}}],Ae=Object(W["a"])({history:Object(W["b"])("/static/"),routes:De}),He=Ae,Le=n("6005"),Ne=(n("e9c4"),n("caad"),n("2532"),n("bfbe")),Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e10,c="\n        ".concat(t,"\n      ");Object(Ne["b"])({type:"".concat(n),title:"".concat(e),text:c,duration:r,data:{}})},Fe=window.localStorage,Ve=Object(u["a"])({state:{isFetching:!1,users:[],searchChars:"",searchedUsers:[],currentUser:{},isUserLoggedin:!1,receiverId:null,vapidKey:"BJ47mTyLGqEnQZR0kymxJmReHKjE9jJgFEPnwbHzYR8RKi3dUguQZvmFu4a49oWkn7JvYRQYSvcQhpidpVlbWVI"},mutations:{UPDATE_IS_FETCHING:function(e,t){e.isFetching=t},UPDATE_USERS:function(e,t){e.users=t},UPDATE_SEARCHED_USERS:function(e,t){e.searchChars=t},SET_USER:function(e,t){Fe.setItem("token",t.token),Fe.setItem("username",t.username),Fe.setItem("id",t.id),Fe.setItem("isLoggedIn",!0),e.isUserLoggedin=!0,He.push({name:"main"}),location.reload()},SET_RECEIVER_ID:function(e,t){Fe.receiverId=t},LOGOUT:function(e){Fe.removeItem("token"),Fe.removeItem("username"),Fe.removeItem("id"),Fe.removeItem("isLoggedIn"),e.isUserLoggedin=!1,location.reload()}},actions:{FETCH_USERS:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://web-notifications.ru/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(window.localStorage.token)},credentials:"include",mode:"cors"});case 3:if(n=t.sent,console.log(n.status),200!=n.status){t.next=11;break}return t.next=8,n.json();case 8:return r=t.sent,e.commit("UPDATE_USERS",r.users),t.abrupt("return");case 11:console.log("An error occured during authorisation"),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},FETCH_LOGIN:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,c,o,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,r=t.username,c=t.password,o="https://web-notifications.ru/login",n.next=6,fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",mode:"cors",body:JSON.stringify({username:r,password:c})});case 6:return a=n.sent,n.next=9,a.json();case 9:s=n.sent,200==s.status?e.commit("SET_USER",s.user):console.log("something wrong"),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](0),console.log(n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})))()},FETCH_REGISTRATION:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,c,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,c="https://web-notifications.ru/registration",e.next=5,fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",mode:"cors",body:JSON.stringify({username:n,password:r})});case 5:return o=e.sent,e.next=8,o.json();case 8:a=e.sent,201==a.status?window.location.href="/login":console.log(a);case 10:case"end":return e.stop()}}),e)})))()},FETCH_SUBSCRIBE:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.register("service-worker.js",{scope:"/static/service-worker.js"});case 2:return n=e.sent,console.log("registration   --\x3e ",n),e.next=6,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t.urlBase64ToUint8Array(t.GET_VAPID_KEY)});case 6:return r=e.sent,c={userId:Fe.id,subscription:r},console.log("subscription   --\x3e ",r),e.next=11,fetch("https://web-notifications.ru/subscribe/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Fe.token)},credentials:"include",mode:"cors",body:JSON.stringify(c)});case 11:case"end":return e.stop()}}),e)})))()},SEND_MESSAGE:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,c,o,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.title,r=t.body,c=Fe.receiverId,o={id:c,title:n,body:r},e.prev=4,e.next=7,fetch("https://web-notifications.ru/sent-notifications",{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(window.localStorage.token)},body:JSON.stringify(o)});case 7:return a=e.sent,e.next=10,a.json();case 10:s=e.sent,console.log(s),200===a.status&&(t.callback(),Pe.apply(void 0,["Message successfully sent"].concat(Object(Le["a"])([,,]),[3e3]))),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](4),console.log(e.t0),alert("Ooops, there is an error. Might be the user can not get notifications at the moment.");case 19:case"end":return e.stop()}}),e,null,[[4,15]])})))()}},getters:{GET_IS_FETCHING:function(e){return e.isFetching},GET_USERS:function(e){return e.users},GET_SEARCHED_USERS:function(e){if(!e.searchChars.length)return e.users;e.searchedUsers=[];for(var t=0;t<Object.entries(e.users).length;t++){var n=Object.entries(e.users)[t][1];n.username.toLowerCase().includes(e.searchChars.toLowerCase())&&e.searchedUsers.push(n)}return e.searchedUsers},GET_IS_LOGGED_IN:function(e){return[e.isUserLoggedin,Fe.isLoggedIn]},GET_RECEIVER_ID:function(e){return Fe.receiverId},GET_VAPID_KEY:function(e){return e.vapidKey}}});n("ab8b"),n("cd74");Object(r["e"])(Q).use(Ve).use(He).use(Ne["a"]).mount("#app")},"5ca9":function(e,t,n){"use strict";n("bec5")},"7cdd":function(e,t,n){},a27e:function(e,t,n){},bec5:function(e,t,n){},d689:function(e,t,n){"use strict";n("f8c0")},ddb8:function(e,t){self.addEventListener("push",(function(e){var t=e.data.json();console.log("SW data is ",t),console.log("actions is: ",t.actions),self.registration.showNotification(t.title,{body:t.body,icon:"favicon.ico",image:t.image})}))},eb39:function(e,t,n){"use strict";n("504b")},f429:function(e,t,n){"use strict";n("a27e")},f8c0:function(e,t,n){},fda0:function(e,t,n){"use strict";n("2561")}});
//# sourceMappingURL=app.e5f28512.js.map